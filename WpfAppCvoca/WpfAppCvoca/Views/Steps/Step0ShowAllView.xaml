<UserControl x:Class="WpfAppCvoca.Views.Steps.Step0ShowAllView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:WpfAppCvoca.Models">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 상단 툴바: Step 제목 + 레이아웃 모드 -->
        <Grid Grid.Row="0" Margin="0,0,0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="Show All" Style="{StaticResource SectionTitleText}" VerticalAlignment="Center" />
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Layout:" VerticalAlignment="Center" Margin="0,0,4,0" Style="{StaticResource CaptionText}" />
                <ComboBox Width="200" 
                          ItemsSource="{Binding LayoutModes}"
                          SelectedItem="{Binding LayoutMode, Mode=TwoWay}"
                          Style="{StaticResource ThemedComboBox}" />
            </StackPanel>
        </Grid>

        <!-- 본문: 동적 컬럼 DataGrid -->
        <DataGrid x:Name="WordDataGrid" Grid.Row="1" Style="{StaticResource SubDataGrid}" ItemsSource="{Binding WordItems}" >
            <DataGrid.Resources>
                <Style x:Key="WordColumnStyle" TargetType="DataGridColumnHeader">
                    <Setter Property="Visibility" Value="{Binding DataContext.ShowWordColumn, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                </Style>
                <Style x:Key="DefinitionColumnStyle" TargetType="DataGridColumnHeader">
                    <Setter Property="Visibility" Value="{Binding DataContext.ShowDefinitionColumn, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                </Style>
                <Style x:Key="ExampleColumnStyle" TargetType="DataGridColumnHeader">
                    <Setter Property="Visibility" Value="{Binding DataContext.ShowExampleColumn, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <!-- Word 컬럼 -->
                <DataGridTextColumn Header="Word" 
                                    Width="*" 
                                    Binding="{Binding Word, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                
                <!-- Definition 컬럼 -->
                <DataGridTextColumn Header="Definition" 
                                    Width="*" 
                                    Binding="{Binding Definition, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                
                <!-- Example 컬럼 -->
                <DataGridTextColumn Header="Example" 
                                    Width="*" 
                                    Binding="{Binding Example, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- 하단 툴바: 저장 버튼 -->
        <StackPanel Grid.Row="2" Style="{StaticResource StatusbarPanel}">
            <Button Content="Save" Style="{StaticResource StatusbarBtn}" Command="{Binding SaveCommand}"/>
        </StackPanel>
    </Grid>
</UserControl>
